{
  "code": [
    "const cities = ['Tokyo', 'London', 'Sydney', 'Cairo', 'Moscow'];",
    "const weatherPromises = cities.map(city => get_weather(city));",
    "",
    "const weatherData = await Promise.all(weatherPromises);",
    "const temperatures = weatherData.map(data => data.temp);",
    "",
    "// Calculate mean",
    "const meanTemp = temperatures.reduce((sum, temp) => sum + temp, 0) / temperatures.length;",
    "",
    "// Calculate median",
    "const sortedTemps = [...temperatures].sort((a, b) => a - b);",
    "const mid = Math.floor(sortedTemps.length / 2);",
    "const medianTemp = sortedTemps.length % 2 !== 0",
    "  ? sortedTemps[mid]",
    "  : (sortedTemps[mid - 1] + sortedTemps[mid]) / 2;",
    "",
    "// Calculate standard deviation",
    "const variance = temperatures.reduce((sum, temp) => sum + Math.pow(temp - meanTemp, 2), 0) / temperatures.length;",
    "const stdDev = Math.sqrt(variance);",
    "",
    "// Find hottest and coldest cities",
    "const hottestCity = weatherData.reduce((hottest, city) => city.temp > hottest.temp ? city : hottest, weatherData[0]);",
    "const coldestCity = weatherData.reduce((coldest, city) => city.temp < coldest.temp ? city : coldest, weatherData[0]);",
    "",
    "// Calculate range",
    "const range = Math.max(...temperatures) - Math.min(...temperatures);",
    "",
    "// Generate report",
    "const report = `Weather Report:\\n` +",
    "  `Mean Temperature: ${meanTemp.toFixed(2)}°C\\n` +",
    "  `Median Temperature: ${medianTemp.toFixed(2)}°C\\n` +",
    "  `Standard Deviation: ${stdDev.toFixed(2)}°C\\n` +",
    "  `Hottest City: ${hottestCity.city} (${hottestCity.temp}°C)\\n` +",
    "  `Coldest City: ${coldestCity.city} (${coldestCity.temp}°C)\\n` +",
    "  `Temperature Range: ${range}°C`;",
    "",
    "console.log(report);"
  ],
  "_note": "Join the 'code' array with newlines to get the full script. This format is for human readability only.",
  "_usage": "Use in tools/call: { \"name\": \"code_execution\", \"arguments\": { \"code\": \"<joined lines>\" } }"
}
